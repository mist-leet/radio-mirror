<ezstream>
    <servers>
        <server>
            <name>main</name>
            <protocol>HTTP</protocol>
            <hostname>icecast</hostname>
            <port>8000</port>
            <user>source</user>
            <password>admin</password>
            <tls>May</tls>
            <tls_cipher_suite>HIGH:!RSA:!SHA:!DH:!aNULL:!eNULL:!TLSv1</tls_cipher_suite>
        </server>
    </servers>
    <streams>
        <stream>
            <stream_name>main</stream_name>
            <mountpoint>/mainstream</mountpoint>
            <intake>api</intake>
            <server>main</server>
            <format>MP3</format>
            <encoder>Lame-CBR128</encoder>
            <stream_url>http://icecast:8000/mainstrem</stream_url>
        </stream>
    </streams>

    <intakes>
        <intake>
            <name>api</name>
            <type>program</type>
            <filename>./play.sh</filename>
        </intake>
    </intakes>

    <metadata>
        <!-- Program to query for metadata instead of from media files -->
        <!-- <program>meta.sh</program> -->

        <!-- Metadata format -->
        <format_str>@a@ - @t@</format_str>

        <!-- Interval for additional metadata refreshes (default: -1 (none)) -->
        <refresh_interval>-1</refresh_interval>

        <!-- Setting to clean up extraneous whitespace (default: no) -->
        <normalize_strings>Yes</normalize_strings>

        <!-- Setting to suppress all metadata udpates (default: no) -->
        <no_updates>Yes</no_updates>
    </metadata>

    <!--
      Decoder configurations
      -->
    <decoders>
        <decoder>
            <!-- Decoder name -->
            <name>OggDec</name>
            <!-- Program and options -->
            <program>oggdec -R -b 16 -o - @T@</program>
            <!-- File extensions to use this decoder for -->
            <file_ext>.ogg</file_ext>
            <file_ext>.oga</file_ext>
        </decoder>

        <decoder>
            <name>MadPlay</name>
            <program>madplay -b 16 -R 44100 -S -o raw:- @T@</program>
            <file_ext>.mp3</file_ext>
        </decoder>

        <decoder>
            <name>Flac</name>
            <program>flac -s -d --force-raw-format --sign=signed --endian=little -o - @T@</program>
            <file_ext>.flac</file_ext>
        </decoder>

        <decoder>
            <name>AAC</name>
            <program>faad -d -f 2 -w @T@</program>
            <file_ext>.m4a</file_ext>
        </decoder>

        <decoder>
            <name>Opus</name>
            <program>opusdec --rate 44100 @T@ -</program>
            <file_ext>.opus</file_ext>
        </decoder>
    </decoders>

    <!--
      Encoder configurations
      -->
    <encoders>
        <encoder>
            <!-- Encoder name -->
            <name>OggEnc-Q1.5</name>
            <!-- Output stream format -->
            <format>Ogg</format>
            <!-- Program and options -->
            <program>oggenc -r -B 16 -C 2 -R 44100 --raw-endianness 0 -q 1.5 -t @M@ -</program>
        </encoder>

        <encoder>
            <name>Opus-VBR96</name>
            <format>Ogg</format>
            <program>opusenc --vbr --bitrate 96 --title @t@ --artist @a@ --raw --raw-rate 44100 - -</program>
        </encoder>

        <encoder>
            <name>Lame-CBR128</name>
            <format>MP3</format>
            <program>lame --preset cbr 128 -r -s 44.1 --bitwidth 16 - -</program>
        </encoder>
    </encoders>

</ezstream>